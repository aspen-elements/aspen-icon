<link rel="import" href="/bower_components/polymer/polymer-element.html">

<link rel="import" href="/bower_components/iron-icon/iron-icon.html">

<link rel="import" href="/aspen_components/aspen-icons/aspen-icons.html">

<dom-module id="aspen-icon">
	<template>
		<style>
			:host {
				display: block;
			}
			iron-icon{
				--iron-icon-height: 50px;
				--iron-icon-width: 50px;
				color: #909090;
				border-radius: 50%;
				border: 1px solid #909090;
			}
			.img {
				height: 50px;
				width: 50px;
				background-size: contain;
				background-position: center;
				background-repeat: no-repeat;
			}
		</style>
		<template is="dom-if" if="{{isImage}}">
			<div class="img" style$="[[iconStyle]]"></div>
		</template>

		<template is="dom-if" if="{{!isImage}}">
			<iron-icon icon="[[icon]]"></iron-icon>
		</template>
	</template>


	<script>
		/**
		 * `aspen-icon` Description
		 *
		 * @summary ShortDescription.
		 * @customElement
		 * @polymer
		 * @extends {Polymer.Element}
		 */
		class AspenIcon extends Polymer.Element {
			/**
			 * String providing the tag name to register the element under.
			 */
			static get is() {
				return 'aspen-icon';
			}

			/**
			 * Object describing property-related metadata used by Polymer features
			 */
			static get properties() {
				return {
					icon:{
						type: String,
						value: ''
					},
					isImage:{
						type: Boolean,
						computed: '_computeIsImage(icon)'
					},
					iconStyle:{
						type: String,
						computed: '_computeStyle(icon)'
					}
					
				};
			}

			/**
			 * Instance of the element is created/upgraded. Use: initializing state,
			 * set up event listeners, create shadow dom.
			 * @constructor
			 */
			constructor() {
				super();
			}

			/**
			 * Use for one-time configuration of your component after local DOM is initialized. 
			 */
			ready() {
				super.ready();

				Polymer.RenderStatus.afterNextRender(this, function() {
					
				});
			}

			_computeStyle(icon){
				return "background-image: url('" + icon + "')";
			}

			_computeIsImage(icon){
				return (icon !== undefined && (icon.indexOf("/") != -1 || icon.endsWith("jpg") || icon.endsWith("png") || icon.endsWith("gif")));
			}


		}

		window.customElements.define(AspenIcon.is, AspenIcon);
	</script>
</dom-module>